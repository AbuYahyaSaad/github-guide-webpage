<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub Complete Guide - Personalized Learning</title>
    <style>
        /* CSS Variables for Theming */
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f6f8fa;
            --bg-tertiary: #e1e4e8;
            --text-primary: #24292e;
            --text-secondary: #586069;
            --text-link: #0366d6;
            --border-color: #e1e4e8;
            --button-primary: #0366d6;
            --button-hover: #0256c7;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
            --shadow: rgba(0, 0, 0, 0.1);
            --code-bg: #f6f8fa;
        }

        [data-theme="dark"] {
            --bg-primary: #0d1117;
            --bg-secondary: #161b22;
            --bg-tertiary: #21262d;
            --text-primary: #c9d1d9;
            --text-secondary: #8b949e;
            --text-link: #58a6ff;
            --border-color: #30363d;
            --button-primary: #58a6ff;
            --button-hover: #1f6feb;
            --success: #3fb950;
            --danger: #f85149;
            --warning: #d29922;
            --shadow: rgba(0, 0, 0, 0.3);
            --code-bg: #161b22;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.3s, color 0.3s, border-color 0.3s;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background-color: var(--bg-primary);
        }

        /* Header with User Menu */
        header {
            background-color: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--text-primary);
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .theme-toggle {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            color: var(--text-primary);
            transition: background-color 0.3s;
        }

        .theme-toggle:hover {
            background-color: var(--bg-tertiary);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--button-primary), var(--button-hover));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .user-dropdown {
            position: relative;
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 10px;
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            box-shadow: 0 4px 12px var(--shadow);
            display: none;
            min-width: 200px;
        }

        .dropdown-menu.active {
            display: block;
        }

        .dropdown-item {
            padding: 12px 16px;
            cursor: pointer;
            transition: background-color 0.2s;
            color: var(--text-primary);
            text-decoration: none;
            display: block;
        }

        .dropdown-item:hover {
            background-color: var(--bg-tertiary);
        }

        /* Login/Register Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background-color: var(--bg-primary);
            padding: 2rem;
            border-radius: 12px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 10px 25px var(--shadow);
        }

        .modal-header {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .modal-header h2 {
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            font-size: 1rem;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--button-primary);
        }

        .form-button {
            width: 100%;
            padding: 0.75rem;
            background-color: var(--button-primary);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .form-button:hover {
            background-color: var(--button-hover);
        }

        .form-toggle {
            text-align: center;
            margin-top: 1rem;
            color: var(--text-secondary);
        }

        .form-toggle a {
            color: var(--text-link);
            text-decoration: none;
        }

        /* Progress Dashboard */
        .dashboard {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 2rem;
        }

        .stat-card {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.5rem;
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--text-primary);
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: var(--bg-tertiary);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 1rem;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--button-primary), var(--success));
            transition: width 0.5s ease;
        }

        /* Main Content */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .nav-menu {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .nav-button {
            background-color: var(--button-primary);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            position: relative;
        }

        .nav-button:hover {
            background-color: var(--button-hover);
            transform: translateY(-2px);
        }

        .nav-button.completed::after {
            content: '‚úì';
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: var(--success);
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .section {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 30px;
            margin-bottom: 30px;
            display: none;
        }

        .section.active {
            display: block;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        h2 {
            color: var(--text-primary);
            font-size: 1.8rem;
        }

        .section-progress {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .progress-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Code blocks */
        .code-block {
            background-color: var(--code-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 16px;
            margin: 10px 0;
            font-family: 'Consolas', 'Monaco', monospace;
            overflow-x: auto;
        }

        /* Features */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .feature-card {
            background-color: var(--bg-tertiary);
            padding: 20px;
            border-radius: 6px;
            border: 1px solid var(--border-color);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 12px var(--shadow);
        }

        /* Achievements */
        .achievements {
            display: flex;
            gap: 10px;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .achievement-badge {
            background-color: var(--warning);
            color: var(--text-primary);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* Notes */
        .notes-section {
            margin-top: 2rem;
            padding: 1rem;
            background-color: var(--bg-tertiary);
            border-radius: 8px;
        }

        .notes-textarea {
            width: 100%;
            min-height: 100px;
            padding: 10px;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            resize: vertical;
        }

        /* Loading State */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid var(--bg-tertiary);
            border-radius: 50%;
            border-top-color: var(--button-primary);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-container {
                flex-wrap: wrap;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .nav-menu {
                flex-direction: column;
                align-items: stretch;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo">üöÄ GitHub Learning Hub</div>
            <div class="user-menu">
                <button class="theme-toggle" onclick="toggleTheme()" title="Toggle theme">
                    <span id="theme-icon">üåô</span>
                </button>
                <div id="auth-section">
                    <button class="nav-button" onclick="showModal('login')">Login</button>
                    <button class="nav-button" onclick="showModal('register')">Register</button>
                </div>
                <div id="user-section" class="user-info" style="display: none;">
                    <div class="user-dropdown">
                        <div class="user-avatar" id="user-avatar">U</div>
                        <div class="dropdown-menu" id="user-dropdown">
                            <a href="#" class="dropdown-item" onclick="showDashboard()">üìä Dashboard</a>
                            <a href="#" class="dropdown-item" onclick="showProfile()">üë§ Profile</a>
                            <a href="#" class="dropdown-item" onclick="showAchievements()">üèÜ Achievements</a>
                            <hr style="margin: 0; border-color: var(--border-color);">
                            <a href="#" class="dropdown-item" onclick="logout()">üö™ Logout</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Login/Register Modal -->
    <div id="auth-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">Login</h2>
                <p id="modal-subtitle">Continue your GitHub learning journey</p>
            </div>
            <form id="auth-form">
                <div class="form-group">
                    <label class="form-label" for="username">Username</label>
                    <input type="text" id="username" class="form-input" required>
                </div>
                <div class="form-group" id="email-group" style="display: none;">
                    <label class="form-label" for="email">Email</label>
                    <input type="email" id="email" class="form-input">
                </div>
                <div class="form-group">
                    <label class="form-label" for="password">Password</label>
                    <input type="password" id="password" class="form-input" required>
                </div>
                <button type="submit" class="form-button" id="auth-submit">Login</button>
            </form>
            <div class="form-toggle">
                <span id="toggle-text">Don't have an account?</span>
                <a href="#" id="toggle-link" onclick="toggleAuthMode()">Register</a>
            </div>
            <button class="form-button" style="margin-top: 10px; background-color: var(--bg-tertiary); color: var(--text-primary);" onclick="closeModal()">Cancel</button>
        </div>
    </div>

    <!-- User Dashboard -->
    <div id="dashboard" class="dashboard" style="display: none;">
        <h2>Welcome back, <span id="dashboard-username">User</span>! üëã</h2>
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value" id="overall-progress">0%</div>
                <div class="stat-label">Overall Progress</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="overall-progress-bar" style="width: 0%"></div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="completed-sections">0/6</div>
                <div class="stat-label">Sections Completed</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="learning-streak">0</div>
                <div class="stat-label">Day Learning Streak üî•</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="achievements-count">0</div>
                <div class="stat-label">Achievements Earned</div>
            </div>
        </div>
        <div class="achievements" id="achievements-list">
            <!-- Achievements will be populated here -->
        </div>
    </div>

    <div class="container">
        <nav class="nav-menu">
            <button class="nav-button" onclick="showSection('basics')" data-section="basics">Basics</button>
            <button class="nav-button" onclick="showSection('setup')" data-section="setup">Setup</button>
            <button class="nav-button" onclick="showSection('commands')" data-section="commands">Commands</button>
            <button class="nav-button" onclick="showSection('workflow')" data-section="workflow">Workflow</button>
            <button class="nav-button" onclick="showSection('collaboration')" data-section="collaboration">Collaboration</button>
            <button class="nav-button" onclick="showSection('advanced')" data-section="advanced">Advanced</button>
        </nav>

        <div id="alert" class="alert" style="display: none;"></div>

        <!-- Basics Section -->
        <section id="basics" class="section active">
            <div class="section-header">
                <h2>GitHub Basics</h2>
                <div class="section-progress">
                    <span class="progress-label">Progress:</span>
                    <div class="progress-bar" style="width: 100px;">
                        <div class="progress-fill" id="basics-progress" style="width: 0%"></div>
                    </div>
                    <span id="basics-percentage">0%</span>
                </div>
            </div>
            
            <h3>What is GitHub?</h3>
            <p>GitHub is a web-based platform for version control and collaboration. It lets you and others work together on projects from anywhere.</p>
            
            <div class="feature-grid">
                <div class="feature-card">
                    <h3>üìÅ Repositories</h3>
                    <p>Containers for your project's files, including documentation, issues, and more.</p>
                </div>
                <div class="feature-card">
                    <h3>üåø Branches</h3>
                    <p>Different versions of a repository for experimenting without affecting the main branch.</p>
                </div>
                <div class="feature-card">
                    <h3>üíæ Commits</h3>
                    <p>Saved changes to your files with descriptions of what was modified.</p>
                </div>
                <div class="feature-card">
                    <h3>üîÑ Pull Requests</h3>
                    <p>Propose changes and request someone review and merge them into the main branch.</p>
                </div>
            </div>

            <div class="notes-section">
                <h4>üìù Your Notes</h4>
                <textarea class="notes-textarea" id="basics-notes" placeholder="Add your personal notes here..." onblur="saveNotes('basics')"></textarea>
            </div>

            <div style="margin-top: 20px;">
                <button class="nav-button" onclick="markComplete('basics')">Mark as Complete ‚úì</button>
            </div>
        </section>

        <!-- Additional sections would follow the same pattern -->
        <!-- For brevity, I'll include the structure but not repeat all content -->
        
        <section id="setup" class="section">
            <div class="section-header">
                <h2>Setting Up Git & GitHub</h2>
                <div class="section-progress">
                    <span class="progress-label">Progress:</span>
                    <div class="progress-bar" style="width: 100px;">
                        <div class="progress-fill" id="setup-progress" style="width: 0%"></div>
                    </div>
                    <span id="setup-percentage">0%</span>
                </div>
            </div>
            <!-- Content continues... -->
        </section>

        <!-- More sections... -->
    </div>

    <script>
        // API Configuration
        const API_URL = 'http://localhost:8000';
        let currentUser = null;
        let authToken = null;
        let currentAuthMode = 'login';

        // Initialize theme
        function initTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            updateThemeIcon(savedTheme);
        }

        // Toggle theme
        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeIcon(newTheme);
            
            // Update user preferences if logged in
            if (authToken) {
                updateUserPreferences({ theme: newTheme });
            }
        }

        function updateThemeIcon(theme) {
            document.getElementById('theme-icon').textContent = theme === 'light' ? 'üåô' : '‚òÄÔ∏è';
        }

        // Modal functions
        function showModal(mode) {
            currentAuthMode = mode;
            const modal = document.getElementById('auth-modal');
            const title = document.getElementById('modal-title');
            const subtitle = document.getElementById('modal-subtitle');
            const submitBtn = document.getElementById('auth-submit');
            const emailGroup = document.getElementById('email-group');
            const toggleText = document.getElementById('toggle-text');
            const toggleLink = document.getElementById('toggle-link');

            if (mode === 'login') {
                title.textContent = 'Login';
                subtitle.textContent = 'Continue your GitHub learning journey';
                submitBtn.textContent = 'Login';
                emailGroup.style.display = 'none';
                toggleText.textContent = "Don't have an account? ";
                toggleLink.textContent = 'Register';
            } else {
                title.textContent = 'Register';
                subtitle.textContent = 'Start your personalized GitHub learning journey';
                submitBtn.textContent = 'Create Account';
                emailGroup.style.display = 'block';
                toggleText.textContent = 'Already have an account? ';
                toggleLink.textContent = 'Login';
            }

            modal.classList.add('active');
        }

        function closeModal() {
            document.getElementById('auth-modal').classList.remove('active');
            document.getElementById('auth-form').reset();
        }

        function toggleAuthMode() {
            const newMode = currentAuthMode === 'login' ? 'register' : 'login';
            showModal(newMode);
        }

        // Authentication
        document.getElementById('auth-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const email = document.getElementById('email').value;

            try {
                if (currentAuthMode === 'login') {
                    await login(username, password);
                } else {
                    await register(username, email, password);
                }
            } catch (error) {
                showAlert('Authentication failed: ' + error.message, 'error');
            }
        });

        async function login(username, password) {
            const formData = new FormData();
            formData.append('username', username);
            formData.append('password', password);

            const response = await fetch(`${API_URL}/token`, {
                method: 'POST',
                body: formData
            });

            if (!response.ok) {
                throw new Error('Invalid credentials');
            }

            const data = await response.json();
            authToken = data.access_token;
            localStorage.setItem('authToken', authToken);
            
            await loadUserData();
            closeModal();
            showAlert('Welcome back!', 'success');
        }

        async function register(username, email, password) {
            const response = await fetch(`${API_URL}/register`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ username, email, password })
            });

            if (!response.ok) {
                const error = await response.json();
                throw new Error(error.detail);
            }

            // Auto-login after registration
            await login(username, password);
            showAlert('Account created successfully!', 'success');
        }

        async function loadUserData() {
            try {
                // Get user info
                const userResponse = await fetch(`${API_URL}/me`, {
                    headers: {
                        'Authorization': `Bearer ${authToken}`
                    }
                });

                if (!userResponse.ok) throw new Error('Failed to load user data');
                
                currentUser = await userResponse.json();
                updateUIForLoggedInUser();

                // Load progress
                await loadProgress();
                
                // Load stats
                await loadStats();

            } catch (error) {
                console.error('Error loading user data:', error);
                logout();
            }
        }

        function updateUIForLoggedInUser() {
            document.getElementById('auth-section').style.display = 'none';
            document.getElementById('user-section').style.display = 'flex';
            document.getElementById('user-avatar').textContent = currentUser.username[0].toUpperCase();
            document.getElementById('dashboard-username').textContent = currentUser.username;
            
            // Apply user preferences
            if (currentUser.preferences.theme) {
                document.documentElement.setAttribute('data-theme', currentUser.preferences.theme);
                updateThemeIcon(currentUser.preferences.theme);
            }
        }

        async function loadProgress() {
            const response = await fetch(`${API_URL}/progress`, {
                headers: {
                    'Authorization': `Bearer ${authToken}`
                }
            });

            if (response.ok) {
                const progress = await response.json();
                progress.forEach(item => {
                    updateSectionProgress(item.section, item.progress, item.completed);
                    if (item.notes) {
                        const notesElement = document.getElementById(`${item.section}-notes`);
                        if (notesElement) notesElement.value = item.notes;
                    }
                });
            }
        }

        async function loadStats() {
            const response = await fetch(`${API_URL}/stats`, {
                headers: {
                    'Authorization': `Bearer ${authToken}`
                }
            });

            if (response.ok) {
                const stats = await response.json();
                document.getElementById('overall-progress').textContent = Math.round(stats.overall_progress) + '%';
                document.getElementById('overall-progress-bar').style.width = stats.overall_progress + '%';
                document.getElementById('completed-sections').textContent = `${stats.completed_sections}/${stats.total_sections}`;
                document.getElementById('learning-streak').textContent = stats.learning_streak;
                document.getElementById('achievements-count').textContent = stats.achievements;
            }
        }

        function updateSectionProgress(section, progress, completed) {
            const progressBar = document.getElementById(`${section}-progress`);
            const percentage = document.getElementById(`${section}-percentage`);
            const navButton = document.querySelector(`[data-section="${section}"]`);

            if (progressBar) progressBar.style.width = progress + '%';
            if (percentage) percentage.textContent = progress + '%';
            if (completed && navButton) navButton.classList.add('completed');
        }

        async function updateProgress(section, progress, completed = false) {
            if (!authToken) return;

            const response = await fetch(`${API_URL}/progress`, {
                method: 'PUT',
                headers: {
                    'Authorization': `Bearer ${authToken}`,
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ section, progress, completed })
            });

            if (response.ok) {
                updateSectionProgress(section, progress, completed);
                await loadStats();
            }
        }

        function markComplete(section) {
            updateProgress(section, 100, true);
            showAlert(`${section} section completed! üéâ`, 'success');
        }

        async function saveNotes(section) {
            if (!authToken) return;

            const notes = document.getElementById(`${section}-notes`).value;
            await fetch(`${API_URL}/progress`, {
                method: 'PUT',
                headers: {
                    'Authorization': `Bearer ${authToken}`,
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ section, progress: 50, notes })
            });
        }

        async function updateUserPreferences(preferences) {
            if (!authToken) return;

            await fetch(`${API_URL}/preferences`, {
                method: 'PUT',
                headers: {
                    'Authorization': `Bearer ${authToken}`,
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(preferences)
            });
        }

        function logout() {
            authToken = null;
            currentUser = null;
            localStorage.removeItem('authToken');
            document.getElementById('auth-section').style.display = 'flex';
            document.getElementById('user-section').style.display = 'none';
            document.getElementById('dashboard').style.display = 'none';
            showAlert('Logged out successfully', 'info');
        }

        function showDashboard() {
            document.getElementById('dashboard').style.display = 'block';
            loadStats();
        }

        function showSection(sectionId) {
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');
            document.getElementById('dashboard').style.display = 'none';
            
            // Update progress when visiting a section
            if (authToken) {
                updateProgress(sectionId, 25);
            }
        }

        function showAlert(message, type = 'info') {
            const alert = document.getElementById('alert');
            alert.textContent = message;
            alert.className = `alert alert-${type}`;
            alert.style.display = 'block';
            setTimeout(() => {
                alert.style.display = 'none';
            }, 3000);
        }

        // User dropdown
        document.getElementById('user-avatar').addEventListener('click', (e) => {
            e.stopPropagation();
            document.getElementById('user-dropdown').classList.toggle('active');
        });

        document.addEventListener('click', () => {
            document.getElementById('user-dropdown').classList.remove('active');
        });

        // Initialize on load
        document.addEventListener('DOMContentLoaded', () => {
            initTheme();
            
            // Check for saved auth token
            const savedToken = localStorage.getItem('authToken');
            if (savedToken) {
                authToken = savedToken;
                loadUserData();
            }
        });
    </script>
</body>
</html>